module.exports = {
  apps : [{
    name: 'api-backend',
    script: './api/backend/index.js', // Chemin relatif au CWD
    cwd: '{{ app_dir }}', // PM2 changera de répertoire vers celui-ci
    instances: 1,
    autorestart: true,
    watch: false,
    max_memory_restart: '1G',
    env: {
      NODE_ENV: 'production',
      PORT: {{ api_port | default(5000) }},
      // Ajoutez d'autres variables d'environnement ici
    },
    // Pour des logs personnalisés gérés par PM2 (si vous n'utilisez pas Promtail pour tout)
    // error_file: '{{ app_dir }}/logs/api-error.log',
    // out_file: '{{ app_dir }}/logs/api-out.log',
    // merge_logs: true,
    // log_date_format: 'YYYY-MM-DD HH:mm Z'
  }]
};